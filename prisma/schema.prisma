generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model APIConfiguration {
  id           String    @id
  provider     String    @unique
  apiKey       String
  isActive     Boolean   @default(true)
  settings     Json      @default("{}")
  lastTestedAt DateTime?
  testStatus   String    @default("not_tested")
  testError    String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime

  @@index([createdAt])
  @@index([isActive])
  @@index([provider])
}

model ActivityLog {
  id         String   @id
  userId     String?
  action     String
  entityType String?
  entityId   String?
  oldData    String?
  newData    String?
  ipAddress  String?
  userAgent  String?
  createdAt  DateTime @default(now())

  @@index([action])
  @@index([createdAt])
  @@index([entityType])
  @@index([userId])
}

model BackupJob {
  id          String    @id
  jobType     String
  status      String
  startedAt   DateTime?
  completedAt DateTime?
  backupFile  String?
  fileSize    BigInt?
  duration    Int?
  error       String?
  createdAt   DateTime  @default(now())

  @@index([createdAt])
  @@index([jobType])
  @@index([status])
}

model BatchOperation {
  id            String    @id
  operationType String
  status        String
  fileCount     Int
  folderCount   Int       @default(0)
  performedBy   String
  initiatedAt   DateTime  @default(now())
  completedAt   DateTime?
  details       String?
  error         String?
  User          User      @relation(fields: [performedBy], references: [id], onDelete: Cascade)

  @@index([initiatedAt])
  @@index([performedBy])
  @@index([status])
}

model CatalogShare {
  id                   String                @id
  token                String                @unique
  partnerId            String
  selectedEquipmentIds String[]
  expiresAt            DateTime?
  createdAt            DateTime              @default(now())
  updatedAt            DateTime
  Partner              Partner               @relation(fields: [partnerId], references: [id], onDelete: Cascade)
  CatalogShareInquiry  CatalogShareInquiry[]

  @@index([expiresAt])
  @@index([partnerId])
  @@index([token])
  @@index([createdAt(sort: Desc)], map: "idx_catalogshare_createdat")
  @@index([partnerId, expiresAt(sort: Desc)], map: "idx_catalogshare_partner_expires")
  @@index([token], map: "idx_catalogshare_token")
}

model CatalogShareInquiry {
  id                  String       @id
  catalogShareId      String
  partnerId           String
  customerName        String
  customerEmail       String
  customerPhone       String
  startDate           DateTime
  endDate             DateTime
  items               Json
  status              String       @default("pending")
  createdAt           DateTime     @default(now())
  updatedAt           DateTime
  breakdownDateTime   DateTime?
  budget              String?
  customerCompany     String?
  deliveryLocation    String?
  eventLocation       String
  eventName           String
  eventType           String?
  setupDateTime       DateTime?
  specialRequirements String?
  CatalogShare        CatalogShare @relation(fields: [catalogShareId], references: [id], onDelete: Cascade)
  Partner             Partner      @relation(fields: [partnerId], references: [id], onDelete: Cascade)

  @@index([catalogShareId])
  @@index([createdAt])
  @@index([partnerId])
  @@index([status])
}

model Category {
  id            String          @id
  name          String
  icon          String?
  version       Int             @default(1)
  createdBy     String?
  updatedBy     String?
  createdAt     DateTime        @default(now())
  updatedAt     DateTime
  description   String?
  EquipmentItem EquipmentItem[]
  Subcategory   Subcategory[]

  @@index([name])
  @@index([name], map: "idx_category_name")
  @@index([updatedAt(sort: Desc)], map: "idx_category_updatedat")
}

model CategoryTranslation {
  id          String   @id
  categoryId  String
  language    String
  name        String
  description String?
  isAutomatic Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime

  @@unique([categoryId, language])
  @@index([categoryId])
  @@index([createdAt])
  @@index([language])
}

model Client {
  id                                String           @id
  name                              String
  contactPerson                     String?
  email                             String?
  phone                             String?
  address                           String?
  notes                             String?
  version                           Int              @default(1)
  createdBy                         String?
  updatedBy                         String?
  createdAt                         DateTime         @default(now())
  updatedAt                         DateTime
  partnerId                         String?
  Partner_Client_partnerIdToPartner Partner?         @relation("Client_partnerIdToPartner", fields: [partnerId], references: [id])
  Event                             Event[]
  EventSubClient                    EventSubClient[]
  Partner_Partner_clientIdToClient  Partner[]        @relation("Partner_clientIdToClient")
  Quote                             Quote[]

  @@index([email])
  @@index([name])
  @@index([partnerId])
}

model CloudFile {
  id           String         @id
  name         String
  originalName String
  mimeType     String
  size         BigInt
  storagePath  String
  url          String?
  folderId     String?
  ownerId      String
  isPublic     Boolean        @default(false)
  isStarred    Boolean        @default(false)
  isTrashed    Boolean        @default(false)
  version      Int            @default(1)
  createdAt    DateTime       @default(now())
  updatedAt    DateTime
  CloudFolder  CloudFolder?   @relation(fields: [folderId], references: [id])
  User         User           @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  FileActivity FileActivity[]
  FileShare    FileShare[]
  FileTag      FileTag[]
  FileVersion  FileVersion[]

  @@index([createdAt])
  @@index([folderId])
  @@index([isStarred])
  @@index([isTrashed])
  @@index([ownerId])
}

model CloudFolder {
  id                String        @id
  name              String
  parentId          String?
  ownerId           String
  color             String?       @default("#1F2937")
  isStarred         Boolean       @default(false)
  isTrashed         Boolean       @default(false)
  createdAt         DateTime      @default(now())
  updatedAt         DateTime
  CloudFile         CloudFile[]
  User              User          @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  CloudFolder       CloudFolder?  @relation("CloudFolderToCloudFolder", fields: [parentId], references: [id], onDelete: Cascade)
  other_CloudFolder CloudFolder[] @relation("CloudFolderToCloudFolder")
  FolderShare       FolderShare[]
  FolderTag         FolderTag[]

  @@index([isStarred])
  @@index([isTrashed])
  @@index([ownerId])
  @@index([parentId])
}

model DataSyncEvent {
  id         String   @id
  entityType String
  entityId   String
  action     String
  data       String?
  version    Int
  processed  Boolean  @default(false)
  createdAt  DateTime @default(now())

  @@index([createdAt])
  @@index([entityType])
  @@index([processed])
}

model EquipmentItem {
  id               String           @id
  name             String
  description      String
  categoryId       String
  subcategoryId    String?
  quantity         Int
  status           String
  location         String
  imageUrl         String?
  dailyRate        Float            @default(0)
  type             String
  version          Int              @default(1)
  createdBy        String?
  updatedBy        String?
  createdAt        DateTime         @default(now())
  updatedAt        DateTime
  deletedAt        DateTime?
  descriptionPt    String?
  imageData        String?
  imageContentType String?          @db.VarChar(50)
  quantityByStatus Json             @default("{\"good\": 0, \"damaged\": 0, \"maintenance\": 0}")
  Category         Category         @relation(fields: [categoryId], references: [id])
  Subcategory      Subcategory?     @relation(fields: [subcategoryId], references: [id])
  MaintenanceLog   MaintenanceLog[]
  QuoteItem        QuoteItem[]
  Rental           Rental[]
  EquipmentScanLog EquipmentScanLog[]

  @@index([categoryId])
  @@index([name])
  @@index([status])
  @@index([subcategoryId])
  @@index([type])
  @@index([deletedAt])
  @@index([categoryId], map: "idx_equipment_category_id")
  @@index([categoryId, name], map: "idx_equipment_category_name")
  @@index([createdAt(sort: Desc)], map: "idx_equipment_createdat")
  @@index([name], map: "idx_equipment_name")
  @@index([status, categoryId], map: "idx_equipment_status_category")
  @@index([subcategoryId], map: "idx_equipment_subcategory_id")
  @@index([subcategoryId, name], map: "idx_equipment_subcategory_name")
}

model Event {
  id             String           @id
  name           String
  clientId       String
  location       String
  startDate      DateTime
  endDate        DateTime
  assignedTo     String?
  version        Int              @default(1)
  createdBy      String?
  updatedBy      String?
  createdAt      DateTime         @default(now())
  updatedAt      DateTime
  agencyId       String?
  quoteId        String?
  totalRevenue   Float            @default(0)
  Partner        Partner?         @relation(fields: [agencyId], references: [id])
  Client         Client           @relation(fields: [clientId], references: [id])
  Quote          Quote?           @relation(fields: [quoteId], references: [id])
  EventSubClient EventSubClient[]
  JobReference   JobReference[]
  Rental         Rental[]
  Subrental      Subrental[]
  EquipmentScanLog EquipmentScanLog[]

  @@index([agencyId])
  @@index([assignedTo])
  @@index([clientId])
  @@index([endDate])
  @@index([quoteId])
  @@index([startDate])
}

model EventSubClient {
  id        String   @id
  eventId   String
  clientId  String
  createdAt DateTime @default(now()) @db.Timestamp(6)
  Client    Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)
  Event     Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)

  @@unique([eventId, clientId])
  @@index([clientId])
  @@index([eventId])
}

model Fee {
  id          String   @id
  name        String
  description String?
  amount      Float
  type        String   @default("fixed")
  category    String?
  isActive    Boolean  @default(true)
  isRequired  Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime

  @@index([category])
  @@index([isActive])
  @@index([isRequired])
}

model FileActivity {
  id        String    @id
  fileId    String
  userId    String
  action    String
  details   String?
  createdAt DateTime  @default(now())
  CloudFile CloudFile @relation(fields: [fileId], references: [id], onDelete: Cascade)
  User      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([action])
  @@index([createdAt])
  @@index([fileId])
  @@index([userId])
}

model FileShare {
  id         String    @id
  fileId     String
  sharedWith String?
  permission String    @default("view")
  shareToken String?   @unique
  expiresAt  DateTime?
  createdAt  DateTime  @default(now())
  CloudFile  CloudFile @relation(fields: [fileId], references: [id], onDelete: Cascade)

  @@index([expiresAt])
  @@index([fileId])
  @@index([shareToken])
}

model FileTag {
  id            String        @id
  fileId        String
  tagId         String
  addedAt       DateTime      @default(now())
  CloudFile     CloudFile     @relation(fields: [fileId], references: [id], onDelete: Cascade)
  TagDefinition TagDefinition @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([fileId, tagId])
  @@index([fileId])
  @@index([tagId])
}

model FileVersion {
  id          String    @id
  fileId      String
  versionNum  Int
  storagePath String
  size        BigInt
  uploadedAt  DateTime  @default(now())
  uploadedBy  String?
  CloudFile   CloudFile @relation(fields: [fileId], references: [id], onDelete: Cascade)

  @@unique([fileId, versionNum])
  @@index([fileId])
  @@index([versionNum])
}

model FolderShare {
  id          String      @id
  folderId    String
  sharedWith  String?
  permission  String      @default("view")
  shareToken  String?     @unique
  expiresAt   DateTime?
  createdAt   DateTime    @default(now())
  CloudFolder CloudFolder @relation(fields: [folderId], references: [id], onDelete: Cascade)

  @@index([expiresAt])
  @@index([folderId])
  @@index([shareToken])
}

model FolderTag {
  id            String        @id
  folderId      String
  tagId         String
  addedAt       DateTime      @default(now())
  CloudFolder   CloudFolder   @relation(fields: [folderId], references: [id], onDelete: Cascade)
  TagDefinition TagDefinition @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([folderId, tagId])
  @@index([folderId])
  @@index([tagId])
}

model JobReference {
  id            String   @id
  partnerId     String
  eventId       String?
  quoteId       String?
  clientName    String?
  referralNotes String?
  commission    Float?
  status        String   @default("pending")
  referralDate  DateTime @default(now())
  version       Int      @default(1)
  createdBy     String?
  updatedBy     String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime
  Event         Event?   @relation(fields: [eventId], references: [id])
  Partner       Partner  @relation(fields: [partnerId], references: [id], onDelete: Cascade)
  Quote         Quote?   @relation(fields: [quoteId], references: [id])

  @@index([eventId])
  @@index([partnerId])
  @@index([quoteId])
  @@index([referralDate])
  @@index([status])
}

model MaintenanceLog {
  id            String        @id
  equipmentId   String
  date          DateTime
  description   String
  cost          Float?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime
  EquipmentItem EquipmentItem @relation(fields: [equipmentId], references: [id], onDelete: Cascade)
}

model Notification {
  id         String    @id
  userId     String
  type       String
  title      String
  message    String
  priority   String    @default("medium")
  isRead     Boolean   @default(false)
  entityType String?
  entityId   String?
  actionUrl  String?
  createdAt  DateTime  @default(now())
  updatedAt  DateTime
  expiresAt  DateTime?
  groupKey   String?
  User       User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([createdAt])
  @@index([expiresAt])
  @@index([groupKey])
  @@index([isRead])
  @@index([priority])
  @@index([type])
  @@index([userId])
}

model NotificationPreference {
  id                 String   @id
  userId             String   @unique
  conflictAlerts     Boolean  @default(true)
  statusChanges      Boolean  @default(true)
  eventReminders     Boolean  @default(true)
  overdueAlerts      Boolean  @default(true)
  criticalAlerts     Boolean  @default(true)
  stockAlerts        Boolean  @default(true)
  equipmentAvailable Boolean  @default(true)
  monthlySummary     Boolean  @default(true)
  toastCritical      Boolean  @default(true)
  toastHigh          Boolean  @default(true)
  updatedAt          DateTime
  User               User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

model Partner {
  id                               String                @id
  name                             String
  companyName                      String?
  contactPerson                    String?
  email                            String?
  phone                            String?
  address                          String?
  website                          String?
  notes                            String?
  isActive                         Boolean               @default(true)
  version                          Int                   @default(1)
  createdBy                        String?
  updatedBy                        String?
  createdAt                        DateTime              @default(now())
  updatedAt                        DateTime
  clientId                         String?
  partnerType                      String                @default("provider")
  commission                       Float?
  logoUrl                          String?
  CatalogShare                     CatalogShare[]
  CatalogShareInquiry              CatalogShareInquiry[]
  Client_Client_partnerIdToPartner Client[]              @relation("Client_partnerIdToPartner")
  Event                            Event[]
  JobReference                     JobReference[]
  Client_Partner_clientIdToClient  Client?               @relation("Partner_clientIdToClient", fields: [clientId], references: [id])
  Subrental                        Subrental[]

  @@index([clientId])
  @@index([isActive])
  @@index([name])
  @@index([partnerType])
}

model ProductTranslation {
  id          String   @id
  productId   String
  language    String
  name        String
  description String?
  isAutomatic Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime

  @@unique([productId, language])
  @@index([createdAt])
  @@index([language])
  @@index([productId])
}

model QuotaChangeHistory {
  id            String       @id
  userId        String
  oldQuotaBytes BigInt
  newQuotaBytes BigInt
  changedBy     String
  reason        String?
  changedAt     DateTime     @default(now())
  StorageQuota  StorageQuota @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([changedAt])
  @@index([changedBy])
  @@index([userId])
}

model Quote {
  id             String         @id
  quoteNumber    String         @unique
  name           String
  location       String
  clientId       String?
  clientName     String
  clientEmail    String?
  clientPhone    String?
  clientAddress  String?
  startDate      DateTime
  endDate        DateTime
  subTotal       Float
  discountAmount Float          @default(0)
  discountType   String         @default("fixed")
  taxRate        Float          @default(0)
  taxAmount      Float          @default(0)
  totalAmount    Float
  status         String         @default("Draft")
  notes          String?
  version        Int            @default(1)
  createdBy      String?
  updatedBy      String?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime
  terms          String?
  Event          Event[]
  JobReference   JobReference[]
  Client         Client?        @relation(fields: [clientId], references: [id])
  QuoteItem      QuoteItem[]

  @@index([clientId])
  @@index([quoteNumber])
  @@index([startDate])
  @@index([status])
}

model QuoteItem {
  id            String         @id
  quoteId       String
  type          String
  equipmentId   String?
  equipmentName String?
  serviceId     String?
  serviceName   String?
  feeId         String?
  feeName       String?
  amount        Float?
  feeType       String?
  quantity      Int?
  unitPrice     Float?
  days          Int?
  lineTotal     Float
  createdAt     DateTime       @default(now())
  updatedAt     DateTime
  EquipmentItem EquipmentItem? @relation(fields: [equipmentId], references: [id])
  Quote         Quote          @relation(fields: [quoteId], references: [id], onDelete: Cascade)
}

model Rental {
  id             String                @id
  eventId        String
  equipmentId    String
  quantityRented Int
  
  // Bulk Scan Support (OCC - Optimistic Concurrency Control)
  scannedOut     Int                  @default(0)
  scannedIn      Int                  @default(0)
  version        Int                  @default(1)
  
  prepStatus     String?
  createdAt      DateTime             @default(now())
  updatedAt      DateTime
  
  EquipmentItem  EquipmentItem        @relation(fields: [equipmentId], references: [id])
  Event          Event                @relation(fields: [eventId], references: [id], onDelete: Cascade)
  EquipmentScanLog EquipmentScanLog[]
  
  @@index([eventId, equipmentId])
  @@index([prepStatus])
  @@index([version])
}

// Equipment Scan Audit Log - Rastreabilidade Total
model EquipmentScanLog {
  id              String        @id @default(cuid())
  rentalId        String
  equipmentId     String
  userId          String?
  eventId         String
  scanType        String        // 'checkout' | 'checkin'
  status          String        // 'success' | 'error' | 'conflict'
  timestamp       DateTime      @default(now())
  ipAddress       String?
  deviceInfo      String?
  conflictVersion Int?          // Vers√£o conflituosa se houver
  
  Rental          Rental        @relation(fields: [rentalId], references: [id], onDelete: Cascade)
  EquipmentItem   EquipmentItem @relation(fields: [equipmentId], references: [id], onDelete: Cascade)
  Event           Event         @relation(fields: [eventId], references: [id], onDelete: Cascade)
  
  @@index([rentalId])
  @@index([equipmentId])
  @@index([eventId])
  @@index([timestamp])
  @@index([scanType])
  @@index([status])
}

model Service {
  id          String   @id
  name        String
  description String?
  unitPrice   Float
  unit        String   @default("hour")
  category    String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime

  @@index([category])
  @@index([isActive])
}

model StorageQuota {
  id                 String               @id
  userId             String               @unique
  usedBytes          BigInt               @default(0)
  quotaBytes         BigInt               @default(10737418240)
  lastUpdated        DateTime             @default(now())
  cloudEnabled       Boolean              @default(false)
  QuotaChangeHistory QuotaChangeHistory[]
  User               User                 @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

model Subcategory {
  id            String          @id
  name          String
  parentId      String
  version       Int             @default(1)
  createdBy     String?
  updatedBy     String?
  createdAt     DateTime        @default(now())
  updatedAt     DateTime
  EquipmentItem EquipmentItem[]
  Category      Category        @relation(fields: [parentId], references: [id], onDelete: Cascade)

  @@index([name])
  @@index([parentId])
  @@index([name], map: "idx_subcategory_name")
  @@index([parentId, name], map: "idx_subcategory_parent_name")
}

model SubcategoryTranslation {
  id            String   @id
  subcategoryId String
  language      String
  name          String
  createdAt     DateTime @default(now())
  updatedAt     DateTime

  @@unique([subcategoryId, language])
  @@index([createdAt])
  @@index([language])
  @@index([subcategoryId])
}

model Subrental {
  id            String   @id
  partnerId     String
  eventId       String?
  equipmentName String
  equipmentDesc String?
  quantity      Int      @default(1)
  dailyRate     Float
  totalCost     Float
  startDate     DateTime
  endDate       DateTime
  status        String   @default("pending")
  invoiceNumber String?
  notes         String?
  version       Int      @default(1)
  createdBy     String?
  updatedBy     String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime
  Event         Event?   @relation(fields: [eventId], references: [id])
  Partner       Partner  @relation(fields: [partnerId], references: [id], onDelete: Cascade)

  @@index([endDate])
  @@index([eventId])
  @@index([partnerId])
  @@index([startDate])
  @@index([status])
}

model SystemSetting {
  id             String   @id
  category       String
  key            String
  value          String?
  isEncrypted    Boolean  @default(false)
  encryptedValue String?
  description    String?
  isEditable     Boolean  @default(true)
  version        Int      @default(1)
  createdAt      DateTime @default(now())
  updatedAt      DateTime

  @@unique([category, key])
  @@index([category])
}

model TagDefinition {
  id          String      @id
  name        String
  ownerId     String
  color       String?     @default("#3B82F6")
  description String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime
  FileTag     FileTag[]
  FolderTag   FolderTag[]
  User        User        @relation(fields: [ownerId], references: [id], onDelete: Cascade)

  @@unique([ownerId, name])
  @@index([ownerId])
}

model Translation {
  id                 String               @id
  sourceText         String
  targetLang         String
  translatedText     String
  model              String               @default("deepl")
  createdAt          DateTime             @default(now())
  updatedAt          DateTime
  category           String               @default("general")
  context            String?
  isAutoTranslated   Boolean              @default(false)
  lastUsed           DateTime?
  needsReview        Boolean              @default(false)
  qualityScore       Int                  @default(100)
  reviewedAt         DateTime?
  reviewedBy         String?
  status             String               @default("approved")
  tags               String[]
  usageCount         Int                  @default(0)
  version            Int                  @default(1)
  TranslationHistory TranslationHistory[]

  @@unique([sourceText, targetLang])
  @@index([category])
  @@index([needsReview])
  @@index([qualityScore])
  @@index([sourceText])
  @@index([status])
  @@index([targetLang])
  @@index([usageCount])
}

model TranslationCache {
  id             String    @id
  sourceText     String
  sourceLanguage String    @default("en")
  targetLanguage String
  translatedText String
  contentType    String
  contentId      String?
  hash           String    @unique
  isAutomatic    Boolean   @default(true)
  createdAt      DateTime  @default(now())
  updatedAt      DateTime
  expiresAt      DateTime?

  @@index([contentId])
  @@index([contentType])
  @@index([createdAt])
  @@index([expiresAt])
  @@index([targetLanguage])
}

model TranslationHistory {
  id                String      @id
  translationId     String
  oldTranslatedText String
  newTranslatedText String
  changedBy         String?
  changeReason      String?
  version           Int
  createdAt         DateTime    @default(now())
  Translation       Translation @relation(fields: [translationId], references: [id], onDelete: Cascade)

  @@index([createdAt])
  @@index([translationId])
  @@index([version])
}

model TranslationJob {
  id              String    @id
  contentType     String
  contentId       String
  sourceLanguage  String    @default("en")
  targetLanguages String
  status          String    @default("pending")
  progress        Int       @default(0)
  totalItems      Int       @default(1)
  completedItems  Int       @default(0)
  error           String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime
  completedAt     DateTime?

  @@index([contentId])
  @@index([contentType])
  @@index([createdAt])
  @@index([status])
}

model User {
  id                     String                  @id
  name                   String
  username               String                  @unique
  password               String
  role                   String
  isActive               Boolean                 @default(true)
  version                Int                     @default(1)
  lastLoginAt            DateTime?
  photoUrl               String?
  nif                    String?
  iban                   String?
  contactPhone           String?
  contactEmail           String?
  emergencyPhone         String?
  isTeamMember           Boolean                 @default(false)
  teamTitle              String?
  teamBio                String?
  teamCoverPhoto         String?
  createdBy              String?
  updatedBy              String?
  createdAt              DateTime                @default(now())
  updatedAt              DateTime
  BatchOperation         BatchOperation[]
  CloudFile              CloudFile[]
  CloudFolder            CloudFolder[]
  FileActivity           FileActivity[]
  Notification           Notification[]
  NotificationPreference NotificationPreference?
  StorageQuota           StorageQuota?
  TagDefinition          TagDefinition[]

  @@index([isActive])
  @@index([isTeamMember])
  @@index([role])
  @@index([username])
}

model UserSession {
  id        String   @id
  userId    String
  token     String   @unique
  ipAddress String?
  userAgent String?
  expiresAt DateTime
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime

  @@index([expiresAt])
  @@index([token])
  @@index([userId])
}

model customization_settings {
  id                           String   @id
  companyName                  String?
  companyTagline               String?
  contactEmail                 String?
  contactPhone                 String?
  useTextLogo                  Boolean  @default(true)
  primaryColor                 String?
  secondaryColor               String?
  accentColor                  String?
  darkMode                     Boolean  @default(false)
  logoUrl                      String?
  faviconUrl                   String?
  loginBackgroundType          String   @default("gradient")
  loginBackgroundColor1        String?
  loginBackgroundColor2        String?
  loginBackgroundImage         String?
  loginCardOpacity             Float    @default(0.95)
  loginCardBlur                Boolean  @default(true)
  loginCardPosition            String   @default("center")
  loginCardWidth               Int      @default(400)
  loginCardBorderRadius        Int      @default(8)
  loginCardShadow              String   @default("large")
  loginLogoUrl                 String?
  loginLogoSize                Int      @default(80)
  loginWelcomeMessage          String?
  loginWelcomeSubtitle         String?
  loginFooterText              String?
  loginShowCompanyName         Boolean  @default(true)
  loginFormSpacing             Int      @default(16)
  loginButtonStyle             String   @default("default")
  loginInputStyle              String   @default("default")
  loginAnimations              Boolean  @default(true)
  loginLightRaysOrigin         String?
  loginLightRaysColor          String?
  loginLightRaysSpeed          Float?
  loginLightRaysSpread         Float?
  loginLightRaysLength         Float?
  loginLightRaysPulsating      Boolean  @default(false)
  loginLightRaysFadeDistance   Float?
  loginLightRaysSaturation     Float?
  loginLightRaysFollowMouse    Boolean  @default(true)
  loginLightRaysMouseInfluence Float?
  loginLightRaysNoiseAmount    Float?
  loginLightRaysDistortion     Float?
  customCSS                    String?
  footerText                   String?
  systemName                   String?
  timezone                     String?
  dateFormat                   String?
  currency                     String?
  language                     String?
  sessionTimeout               Int?
  requireStrongPasswords       Boolean  @default(true)
  enableTwoFactor              Boolean  @default(false)
  maxLoginAttempts             Int?
  emailEnabled                 Boolean  @default(true)
  smtpServer                   String?
  smtpPort                     String?
  smtpUsername                 String?
  smtpPassword                 String?
  fromEmail                    String?
  autoBackup                   Boolean  @default(true)
  backupFrequency              String?
  backupRetention              Int?
  version                      Int      @default(1)
  updatedBy                    String?
  createdAt                    DateTime @default(now())
  updatedAt                    DateTime
  pdfCompanyName               String?
  pdfCompanyTagline            String?
  pdfContactEmail              String?
  pdfContactPhone              String?
  pdfLogoUrl                   String?
  pdfUseTextLogo               Boolean?
  pdfFooterMessage             String?
  pdfFooterContactText         String?
  pdfShowFooterContact         Boolean?
  themePreset                  String?
  catalogTermsAndConditions    String?
}
